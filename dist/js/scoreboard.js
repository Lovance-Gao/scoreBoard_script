!function(t){var i={};function n(s){if(i[s])return i[s].exports;var e=i[s]={i:s,l:!1,exports:{}};return t[s].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=t,n.c=i,n.d=function(t,i,s){n.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,i){if(1&i&&(t=n(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var e in t)n.d(s,e,function(i){return t[i]}.bind(null,e));return s},n.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(i,"a",i),i},n.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},n.p="/dist",n(n.s=26)}({26:function(t,i,n){t.exports=n(27)},27:function(t,i,n){"use strict";n(31);var s=n(28),e=n(29),u=n(30);({scoreboardConfig:{instruction:{op:"",Fi:"",Fj:"",Fk:""},insStage:{issue:0,read_op:0,exe_op:0,write:0},functional_status:{busy:!1,op:"",fi:"",fj:"",fk:"",qj:"",qk:"",rj:"",rk:""},unit_count:{integer:1,multi:1,add:1,divide:1},memory_block:30},unit_time:{integer:1,multi:10,add:2,divide:40},interval:0,instruction_status:[],functional_unit_status:{integer:[{name:"",busy:!1,op:"",fi:"",fj:"",fk:"",qj:"",qk:"",rj:"",rk:"",time:1}],multi:[{name:"",busy:!1,op:"",fi:"",fj:"",fk:"",qj:"",qk:"",rj:"",rk:"",time:10}],add:[{name:"",busy:!1,op:"",fi:"",fj:"",fk:"",qj:"",qk:"",rj:"",rk:"",time:2}],divide:[{name:"",busy:!1,op:"",fi:"",fj:"",fk:"",qj:"",qk:"",rj:"",rk:"",time:40}]},register_result_status:{f0:[],f1:[],f2:[],f3:[],f4:[],f5:[],f6:[],f7:[],f8:[],f9:[],f10:[]},instruction:[],scoreboardInit:function(){for(let t=0;t<this.instruction.length;t++)this.instruction_status.push(this.scoreboardConfig.insStage);this.displayStatus(),this.displayUnit(),this.displayRegister()},addUnit:function(t){this.functional_unit_status[t].add({name:"",busy:!1,op:"",fi:"",fj:"",fk:"",qj:"",qk:"",rj:"",rk:"",time:this.unit_time[t]})},start_simul:function(){window.setInterval(this.intervalCheck,1e3)},intervalCheck:function(){let t=[];this.interval++;let i=this.issueOP(this.interval);t.push(i),this.instruction_status[i].issue=1;let n=this.readOp(this.interval,t);t.push(n);let s=this.execute(this.interval,t);t.push(s),this.writebackOp(this.interval,t),this.displayStatus(),this.displayUnit(),this.displayRegister()},issueOP:function(t){for(let i=0,n=this.instruction.length;i<n;i++)if(0==this.instruction_status[i].issue){let n=this.instruction[i].op;for(let s=0,e=this.functional_unit_status[n].length;s<e;s++)if(!1===this.functional_unit_status[n][s].busy){let e={name:i,busy:!0,op:n,fi:this.instruction[i].fi,fj:this.instruction[i].fj,fk:this.instruction[i].fk,qj:"",qk:"",rj:"yes",rk:"yes",time:_utils.unit_time[n]};for(let t=0,i=this.functional_unit_status.integer.length;t<i;t++){let i=this.functional_unit_status.integer[t];i.fi===e.fj&&(e.qj=i.op,e.rj="no"),i.fi===e.fk&&(e.qk=i.op,e.rk="no")}for(let t=0,i=this.functional_unit_status.multi.length;t<i;t++){let i=this.functional_unit_status.multi[t];i.fi===e.fj&&(e.qj=i.op,e.rj="no"),i.fi===e.fk&&(e.qk=i.op,e.rk="no")}for(let t=0,i=this.functional_unit_status.add.length;t<i;t++){let i=this.functional_unit_status.add[t];i.fi===e.fj&&(e.qj=i.op,e.rj="no"),i.fi===e.fk&&(e.qk=i.op,e.rk="no")}for(let t=0,i=this.functional_unit_status.divide.length;t<i;t++){let i=this.functional_unit_status.divide[t];i.fi===e.fj&&(e.qj=i.op,e.rj="no"),i.fi===e.fk&&(e.qk=i.op,e.rk="no")}return this.functional_unit_status[n][s]=e,this.register_result_status[e.fi].push(e.op),this.instruction_status[i].issue=t,i}}},readOp:function(t,i){for(let n=0,s=instruction.length;n<s;n++)if(1==instruction_status[n].issue&&0==instruction_status[n].read_op&&!(n in i)){let i=instruction[n].op;for(let s=0,e=this.functional_unit_status[i].length;s<e;s++)if(this.functional_unit_status[i][s].name===n&&"yes"===this.functional_unit_status[i][s].rj&"yes"===this.functional_unit_status[i][s].rk)return this.instruction_status[n].read_op=t,n}},execute:function(t,i){for(let n=0,s=instruction.length;n<s;n++)if(1!=instruction_status[n].read_op&&0==instruction_status[n].exe_op&&!(n in i)){let i=instruction[n].op;for(let s=0,e=this.functional_unit_status[i].length;s<e;s++)if(this.functional_unit_status[i][s].name===n)return 1===this.functional_unit_status[i][s].time?this.instruction_status[n].exe_op=t:this.functional_unit_status[i][s].time=this.functional_unit_status[i][s].time-1,n}},writebackOp:function(t,i){for(let n=0,s=instruction.length;n<s;n++)if(1!=instruction_status[n].exe_op&&0==instruction_status[n].write&&!(n in i)){let i=!0,s=instruction[n].op;for(let t=0;t<n;t++)instruction[t].fj!==instruction[n].fi&&instruction[t].fk!==instruction[n].fi||0!==instruction_status[t].read_op||(i=!1);if(1==i){let i=instruction[n].fi;for(let t=0,i=this.functional_unit_status[s].length;t<i;t++)functional_unit_status[s][t].name==n&&(functional_unit_status[s][t]={name:"",busy:!1,op:"",fi:"",fj:"",fk:"",qj:"",qk:"",rj:"",rk:"",time:_utils.unit_time[s]});let e=n+1;for(this.instruction.length;instruction[e].fi!=i;e++){if(i===instruction[e].fj){let t=this.functional_unit_status[instruction[e].op];for(let i=0,n=this.functional_unit_status[t].length;i<n;i++)this.functional_unit_status[t][i].name===e&&(this.functional_unit_status[t][i].rj="yes")}if(i===instruction[e].fk){let t=this.functional_unit_status[instruction[e].op];for(let i=0,n=this.functional_unit_status[t].length;i<n;i++)this.functional_unit_status[t][i].name===e&&(this.functional_unit_status[t][i].rk="yes")}}let u=this.register_result_status[i].indexOf(s);return this.register_result_status[i].splice(u,1),this.instruction_status[n].write=t,n}}},displayIns:function(){$("#instruction").html("");let t=this.instruction;for(let i=0,n=t.length;i<n;i++)t[i].id=i,$("#instruction").append(_utils.renderHtml(s,t[i]))},displayStatus:function(){$("#status").html("");let t=this.instruction_status;for(let i=0,n=t.length;i<n;i++)$("#status").append(_utils.renderHtml(e,t[i]))},displayUnit:function(){$("#unit").html("");let t=this.functional_unit_status;for(let i=0,n=t.integer.length;i<n;i++)$("#unit").append(_utils.renderHtml(e,t.integer[i]));for(let i=0,n=t.multi.length;i<n;i++)$("#unit").append(_utils.renderHtml(e,t.multi[i]));for(let i=0,n=t.add.length;i<n;i++)$("#unit").append(_utils.renderHtml(e,t.add[i]));for(let i=0,n=t.divide.length;i<n;i++)$("#unit").append(_utils.renderHtml(e,t.divide[i]))},displayRegister:function(){$("#register").html(""),$("#register").append(_utils.renderHtml(u,this.register_result_status))},init:function(){console.log("init"),this.bindEvent()},bindEvent:function(){let t=this;$("#confirm").click(function(){t.confirm()}),$("#add-btn").click(function(){t.addInstruction($("#instruction-input").val()),t.displayIns(),$("#delete-button").click(function(){console.log($(this).attr("value")),t.deleteInstruction($(this).attr("value")),t.displayIns()})}),$("#start").click(function(){t.start_simul()}),$("#one-step").click(function(){t.intervalCheck()}),$("#clear").click(function(){t.clearStatus(),t.displayStatus(),t.displayUnit(),t.displayRegister()})},addInstruction:function(t){let i={op:"",fi:"",fj:"",fk:""},n=t.trim().split(/\s+/);"LD"===n[0]?i.op="integer":"MULTI"===n[0]?i.op="multi":"SUBD"===n[0]||"ADDD"===n[0]?i.op="add":"DIVD"===n[0]&&(i.op="divide"),i.fi=n[1],i.fj=n[2],i.fk=n[3],this.instruction.push(i)},deleteInstruction:function(t){this.instruction.splice(t,1)},clearStatus:function(){this.interval=0,this.instruction_status=[],this.functional_unit_status={integer:[{name:"",busy:!1,op:"",fi:"",fj:"",fk:"",qj:"",qk:"",rj:"",rk:"",time:1}],multi:[{name:"",busy:!1,op:"",fi:"",fj:"",fk:"",qj:"",qk:"",rj:"",rk:"",time:10}],add:[{name:"",busy:!1,op:"",fi:"",fj:"",fk:"",qj:"",qk:"",rj:"",rk:"",time:2}],divide:[{name:"",busy:!1,op:"",fi:"",fj:"",fk:"",qj:"",qk:"",rj:"",rk:"",time:40}]},this.register_result_status={f0:[],f1:[],f2:[],f3:[],f4:[],f5:[],f6:[],f7:[],f8:[],f9:[],f10:[]}},confirm:function(){this.scoreboardInit()}}).init()},28:function(t,i){t.exports='<tr><td>{{op}}</td><td>{{fi}}</td><td>{{fj}}</td><td>{{fk}}</td><td><button class="btn-mini" id="delete-button" value="{{id}}">删除</button></td></tr>'},29:function(t,i){t.exports="<tr><td>{{issue}}</td><td>{{read_op}}</td><td>{{exe_op}}</td><td>{{write}}</td></tr>"},30:function(t,i){t.exports="<tr><td>{{#f0}}{{.}}{{/f0}}</td><td>{{#f1}}{{.}}{{/f1}}</td><td>{{#f2}}{{.}}{{/f2}}</td><td>{{#f3}}{{.}}{{/f3}}</td><td>{{#f4}}{{.}}{{/f4}}</td><td>{{#f5}}{{.}}{{/f5}}</td><td>{{#f6}}{{.}}{{/f6}}</td><td>{{#f7}}{{.}}{{/f7}}</td><td>{{#f8}}{{.}}{{/f8}}</td><td>{{#f9}}{{.}}{{/f9}}</td><td>{{#f10}}{{.}}{{/f10}}</td></tr>"},31:function(t,i){}});
//# sourceMappingURL=scoreboard.js.map